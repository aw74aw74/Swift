# Приложение с интерфейсом в стиле VK

## Описание
Данное приложение демонстрирует использование UITabBarController для организации интерфейса в стиле социальной сети с тремя экранами: Friends (Друзья), Groups (Группы) и Photos (Фото). Приложение использует сетевой слой для загрузки данных из JSON-файла, размещенного на GitHub.

Приложение позволяет просматривать списки друзей и групп, а также коллекцию фотографий. Данные загружаются с удаленного сервера с использованием URLSession. Также реализован экран профиля с кастомной анимацией перехода и индикацией онлайн-статуса пользователей.

## Реализованные задания

### 1. Темы приложения
В приложении реализована поддержка нескольких тем оформления:
- Светлая тема (Light)
- Темная тема (Dark)
- Синяя тема (Blue)

Пользователь может выбрать тему в своем профиле, где отображается имя и аватарка. При смене темы меняется не только фон приложения, но и цвет текста, цвет фона ячеек, цвет элементов навигации и других UI-компонентов. Реализация выполнена с использованием паттерна Singleton (ThemeManager) и протокола ThemeProtocol.

### 2. Core Data
Добавлена поддержка Core Data для сохранения данных о друзьях и группах. Когда пользователь переходит к списку друзей или групп, сначала отображаются данные из локального хранилища Core Data. После получения ответа на сетевой запрос, отображаются новые данные, которые также обновляются в Core Data. При возникновении ошибки сетевого запроса, пользователю показывается соответствующее уведомление через UIAlertController, а также отображаются данные из Core Data с указанием времени их последнего обновления.

### 3. Обновление списка друзей
Добавлена возможность обновления списка друзей с помощью UIRefreshControl. Пользователь может потянуть таблицу вниз, находясь в верхней части списка, чтобы инициировать обновление данных. После получения новых данных, они отображаются в интерфейсе и обновляются в Core Data.

### 4. Индикация обновления
Во время получения данных при обновлении списка друзей, пользователю показывается индикатор загрузки (UIActivityIndicatorView или UIRefreshControl), который информирует о процессе обновления данных.

### 5. Профиль друга
Реализована возможность перехода в профиль друга при нажатии на ячейку в списке друзей. Профиль друга выглядит аналогично профилю пользователя, но без возможности смены темы. В профиле друга отображается его фото, имя и индикатор онлайн-статуса.

## Функциональность

### Экран "Друзья"
- Отображает круглое изображение и имя выбранного друга под заголовком "Друзья"
- Содержит таблицу с друзьями, загруженными из JSON-файла
- При выборе друга в таблице обновляется имя и фото в верхней части экрана
- Имеет кнопку в навигационной панели для перехода на экран профиля друга
- Асинхронно загружает изображения друзей с обработкой ошибок

### Экран "Группы"
- Отображает профиль с изображением, названием и описанием выбранной группы
- Содержит таблицу с группами, загруженными из JSON-файла
- Каждая группа имеет свое уникальное описание и ID
- При выборе группы в таблице обновляется название и описание в профиле
- Асинхронно загружает изображения групп с обработкой ошибок

### Экран "Фото"
- Отображает коллекцию из 6 фотографий в сетке 2x3
- Изображения автоматически масштабируются с сохранением пропорций
- Фотографии загружаются из ресурсов приложения
- Ячейки с фотографиями имеют белый фон и скругленные углы

### Экран "Профиль"
- Представляется модально с кастомной анимацией перехода
- Отображает круглое фото пользователя и его имя
- Имеет кнопку закрытия для возврата на предыдущий экран
- Асинхронно загружает фото пользователя с обработкой ошибок
- Использует заглушку в случае ошибки загрузки изображения

### Экран "Профиль друга"
- Отображает круглое фото друга и его имя
- Показывает текстовый индикатор онлайн-статуса ("в сети"/"не в сети") с соответствующим цветовым индикатором
- Индикатор онлайн-статуса отображается только в профиле друга (не в личном профиле)
- Цвет индикатора меняется в зависимости от статуса (зеленый для "в сети", серый для "не в сети")
- Поддерживает адаптацию к текущей теме приложения

### Кастомная анимация перехода
- Реализована с помощью UIViewControllerAnimatedTransitioning
- Плавное масштабирование и изменение прозрачности при переходе
- Разные анимации для появления и скрытия экрана профиля
- Использует UIPercentDrivenInteractiveTransition для плавных переходов

## Навигация и авторизация
- При запуске приложения отображается экран авторизации
- Приложение загружает данные с GitHub с использованием URLSession
- По клику на кнопку "Войти" происходит переход на UITabBarController
- Внизу экрана расположены три вкладки для переключения между экранами

## Оптимизация кода
- Удалено дублирующееся квадратное фото друга, оставлено только круглое фото
- Удалены методы имитации API-запросов и вывод в консоль
- Выделены отдельные методы для загрузки изображений
- Добавлена обработка ошибок при загрузке изображений
- Реализованы заглушки для случаев ошибок загрузки
- Использован подход [weak self] для предотвращения утечек памяти

## Технические особенности
- Использование URLSession для загрузки данных с удаленного сервера (GitHub)
- Декодирование JSON-данных с использованием протокола Codable
- Использование UITabBarController для организации многостраничного интерфейса
- Применение UITableView для отображения списков друзей и групп
- Использование UICollectionView для отображения фотографий
- Реализация кастомной анимации перехода с использованием UIViewControllerAnimatedTransitioning
- Асинхронная загрузка изображений с обработкой ошибок
- Структурированный сетевой слой с использованием паттерна Result
- Оптимизированный код без избыточных массивов и методов
- Динамическое обновление интерфейса при выборе элементов в таблицах
- Использование Auto Layout для адаптивного интерфейса
- Применение модификатора final для классов для предотвращения случайного наследования
- Разделение функций на мелкие с одной ответственностью (setupViewAppearance, addSubviews, setupDelegates, setupConstraints)
- Подробная документация кода с использованием SwiftDocs
- Система индикации онлайн-статуса пользователей с визуальным отображением
- Поддержка тем интерфейса с адаптацией всех элементов, включая индикаторы статуса

## Структура проекта
- **ViewController.swift**: Контроллер экрана авторизации, загружает данные из JSON-файла на GitHub
- **MainTabBarController.swift**: Контроллер с вкладками, отвечает за передачу данных в дочерние контроллеры
- **FriendsViewController.swift**: Контроллер для экрана "Друзья" с таблицей друзей и круглым фото выбранного друга
- **GroupsViewController.swift**: Контроллер для экрана "Группы" с таблицей групп
- **PhotosViewController.swift**: Контроллер для экрана "Фото" с коллекцией фотографий
- **ProfileViewController.swift**: Контроллер экрана профиля с отображением фото и имени пользователя
- **FriendProfileViewController.swift**: Контроллер экрана профиля друга с отображением фото, имени и индикатора онлайн-статуса
- **CustomTransitionAnimator.swift**: Реализация кастомной анимации перехода между экранами
- **NetworkManager.swift**: Сетевой слой для загрузки данных и обработки ошибок
- **Models.swift**: Модели данных для приложения (Friend, Group, Photo, MockData)
- **ThemeManager.swift**: Менеджер тем приложения с поддержкой светлой и темной темы
- **PhotoCell**: Класс ячейки для коллекции фотографий (находится в файле PhotosViewController.swift)
- **AppDelegate.swift**: Отвечает за жизненный цикл приложения
- **SceneDelegate.swift**: Отвечает за жизненный цикл окна приложения
- **Assets.xcassets**: Ресурсы приложения, включая изображения
- **seminar_06_data.json**: JSON-файл с данными о друзьях, группах и фотографиях (загружается с GitHub)
